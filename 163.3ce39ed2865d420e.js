"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[163],{3163:(X,g,a)=>{a.r(g),a.d(g,{PublicationsModule:()=>w});var Z=a(9853),u=a(9653),m=a(3036),b=a(1665),T=a(4004),C=a(5861),r=a(4006),_=a(5698),t=a(4650),s=a(6895),d=a(9549),y=a(4144),P=a(4385),I=a(3238),A=a(4859),q=a(1572),c=a(5412),h=a(741);function O(n,i){if(1&n&&(t.TgZ(0,"mat-option",14),t._uU(1),t.ALo(2,"to_full_name"),t.qZA()),2&n){const o=i.$implicit;t.Q6J("value",o.id),t.xp6(1),t.Oqu(t.lcZ(2,2,o))}}function F(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"mat-form-field")(2,"mat-label"),t._uU(3,"Authors"),t.qZA(),t.TgZ(4,"mat-select",12),t.YNc(5,O,3,4,"mat-option",13),t.qZA(),t.TgZ(6,"mat-error"),t._uU(7,"Authors are required."),t.qZA()(),t.BQk()),2&n){const o=i.ngIf;t.xp6(5),t.Q6J("ngForOf",o)}}function J(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"Save"),t.qZA())}function L(n,i){1&n&&t._UZ(0,"mat-progress-spinner",15),2&n&&t.Q6J("diameter",24)("mode","indeterminate")}let v=(()=>{class n{constructor(o,e){this._formBuilder=o,this._store=e,this.faculties$=this._store.pipe((0,u.Ys)(b.f.FACULTY),(0,T.U)(l=>new Z.l(l).toArray())),this.form=this._formBuilder.group({title:["",r.kI.required],journal:["",r.kI.required],volume:["",r.kI.required],year:["",r.kI.required],authors:["",r.kI.required],files:[""]})}ngOnInit(){}save(){var o=this;return(0,C.Z)(function*(){if(o.form.invalid)return;let e={...o.form.value};o.faculties$.pipe((0,_.q)(1)).subscribe(l=>{o._store.dispatch(m.S.PUBLICATION.ADD({publication:{...e,authors:l.filter(f=>e.authors.includes(f.id))}}))})})()}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(r.qu),t.Y36(u.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["publications-add"]],decls:40,vars:6,consts:[["mat-dialog-title",""],[1,"grid","grid-cols-1","md:grid-cols-2","gap-x-5",3,"formGroup"],[4,"ngIf"],["matInput","","formControlName","title"],["matInput","","formControlName","journal"],["matInput","","formControlName","volume"],["type","number","matInput","","formControlName","year"],[1,"md:col-span-2"],["matInput","","formControlName","files"],["id","close","mat-button","","mat-dialog-close","",1,"ml-auto"],["mat-button","",1,"mat-raised-button","mat-primary",3,"click"],[3,"diameter","mode",4,"ngIf"],["multiple","","formControlName","authors"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"diameter","mode"]],template:function(o,e){1&o&&(t.TgZ(0,"h2",0),t._uU(1,"Add Publication"),t.qZA(),t.TgZ(2,"mat-dialog-content")(3,"form",1),t.YNc(4,F,8,1,"ng-container",2),t.ALo(5,"async"),t.TgZ(6,"mat-form-field")(7,"mat-label"),t._uU(8,"Title"),t.qZA(),t._UZ(9,"input",3),t.TgZ(10,"mat-error"),t._uU(11,"Title is required."),t.qZA()(),t.TgZ(12,"mat-form-field")(13,"mat-label"),t._uU(14,"Journal"),t.qZA(),t._UZ(15,"input",4),t.TgZ(16,"mat-error"),t._uU(17,"Journal is required."),t.qZA()(),t.TgZ(18,"mat-form-field")(19,"mat-label"),t._uU(20,"Volume"),t.qZA(),t._UZ(21,"input",5),t.TgZ(22,"mat-error"),t._uU(23,"Volume is required."),t.qZA()(),t.TgZ(24,"mat-form-field")(25,"mat-label"),t._uU(26,"Year"),t.qZA(),t._UZ(27,"input",6),t.TgZ(28,"mat-error"),t._uU(29,"Year is required."),t.qZA()(),t.TgZ(30,"mat-form-field",7)(31,"mat-label"),t._uU(32,"File Links(Separated by comma)"),t.qZA(),t._UZ(33,"textarea",8),t.qZA()()(),t.TgZ(34,"mat-dialog-actions")(35,"button",9),t._uU(36," Cancel "),t.qZA(),t.TgZ(37,"button",10),t.NdJ("click",function(){return e.save()}),t.YNc(38,J,2,0,"span",2),t.YNc(39,L,1,2,"mat-progress-spinner",11),t.qZA()()),2&o&&(t.xp6(3),t.Q6J("formGroup",e.form),t.xp6(1),t.Q6J("ngIf",t.lcZ(5,4,e.faculties$)),t.xp6(34),t.Q6J("ngIf",!e.form.disabled),t.xp6(1),t.Q6J("ngIf",e.form.disabled))},dependencies:[r._Y,r.Fj,r.wV,r.JJ,r.JL,s.sg,s.O5,r.sg,r.u,d.TO,d.KE,d.hX,y.Nt,P.gD,I.ey,A.lW,q.Ou,c.ZT,c.uh,c.xY,c.H8,h.L,s.Ov]}),n})();var N=a(2235),Y=a(7392),p=a(8255);function B(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div"),t._uU(2),t.ALo(3,"to_full_name"),t.qZA(),t.BQk()),2&n){const o=i.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,o)," ")}}function Q(n,i){if(1&n&&(t.ynx(0),t.YNc(1,B,4,3,"ng-container",14),t.BQk()),2&n){const o=t.oxw().$implicit,e=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.authors)("ngForTrackBy",e.trackByFn)}}function M(n,i){if(1&n){const o=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(o);const l=t.oxw().$implicit,f=t.oxw();return t.KtG(f.remove(l))}),t._uU(1," Remove "),t.qZA()}}function k(n,i){if(1&n&&(t.TgZ(0,"tr",5)(1,"td"),t.YNc(2,Q,2,2,"ng-container",6),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td",7)(14,"div",8)(15,"button",9),t._UZ(16,"mat-icon",10),t.qZA(),t.TgZ(17,"mat-menu",11,12),t.YNc(19,M,2,0,"button",13),t.qZA()()()()),2&n){const o=i.$implicit,e=t.MAs(18),l=t.oxw();t.xp6(2),t.Q6J("ngIf",o.authors),t.xp6(2),t.Oqu(o.title),t.xp6(2),t.Oqu(o.journal),t.xp6(2),t.Oqu(o.volume),t.xp6(2),t.Oqu(o.year),t.xp6(2),t.Oqu(o.files),t.xp6(3),t.Q6J("matMenuTriggerFor",e),t.xp6(2),t.Q6J("xPosition","before"),t.xp6(2),t.Q6J("ngIf",l.isAdmin)}}let x=(()=>{class n{constructor(o){this._store=o,this.publications=[],this.isAdmin="null"!==localStorage.getItem("accessToken")}ngOnInit(){}remove(o){this._store.dispatch(m.S.PUBLICATION.REMOVE({id:o.id}))}trackByFn(o,e){return e.id||o}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(u.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["publications-list"]],inputs:{publications:"publications"},decls:20,vars:2,consts:[[1,"flex","flex-col","flex-auto","p-3","-mt-3","overflow-hidden","bg-card","md:px-10"],[1,"flex","flex-col","flex-auto","overflow-x-auto","overflow-y-auto","border-t","border-t-gray-200"],[1,"overflow-y-visible","min-w-240"],[1,"text-left"],["class","text-center border-t h-[45px] border-gray-100 hover:bg-gray-50",4,"ngFor","ngForTrackBy","ngForOf"],[1,"text-center","border-t","h-[45px]","border-gray-100","hover:bg-gray-50"],[4,"ngIf"],[1,"text-center","rounded-r-2xl"],[1,"flex"],[1,"flex","items-center","mx-auto","hover:underline",3,"matMenuTriggerFor"],["svgIcon","feather:more-horizontal",1,"ml-3"],[3,"xPosition"],["tableMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["mat-menu-item","",3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"table",2)(3,"thead",3)(4,"tr")(5,"th"),t._uU(6,"Authors"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Title"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Journal"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Volume"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Year"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Files"),t.qZA(),t._UZ(17,"th"),t.qZA()(),t.TgZ(18,"tbody"),t.YNc(19,k,20,9,"tr",4),t.qZA()()()()),2&o&&(t.xp6(19),t.Q6J("ngForTrackBy",e.trackByFn)("ngForOf",e.publications))},dependencies:[s.sg,s.O5,Y.Hw,p.VK,p.OP,p.p6,h.L]}),n})();function $(n,i){if(1&n){const o=t.EpF();t.TgZ(0,"div",5)(1,"button",6),t.NdJ("click",function(){t.CHM(o);const l=t.oxw();return t.KtG(l.add())}),t._uU(2," Add Publication "),t.qZA()()}}function E(n,i){if(1&n&&(t.ynx(0),t._UZ(1,"publications-list",7),t.BQk()),2&n){const o=i.ngIf;t.xp6(1),t.Q6J("publications",o)}}let U=(()=>{class n{constructor(o,e){this._matDialog=o,this._store=e,this.isAdmin="null"!==localStorage.getItem("accessToken"),this.publications$=this._store.pipe((0,u.Ys)(b.f.PUBLICATION),(0,T.U)(l=>new Z.l(l).toArray()))}ngOnInit(){this._store.dispatch(m.S.FACULTY.LOAD()),this._store.dispatch(m.S.PUBLICATION.LOAD())}add(){this._matDialog.open(v,{panelClass:["w-1/2","drop-shadow-sm","rounded-none"]})}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(c.uw),t.Y36(u.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["publications"]],decls:6,vars:4,consts:[[1,"w-full"],["title","Publications","subtitle","Your Publications ","icon","mat_outline:edit_note"],[1,"flex","items-center","py-2","bg-white","border-b"],["class","ml-auto",4,"ngIf"],[4,"ngIf"],[1,"ml-auto"],["mat-button","",1,"mr-3","text-white","bg-isat-blue",3,"click"],[3,"publications"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"app-header",1),t.TgZ(2,"div",2),t.YNc(3,$,3,0,"div",3),t.qZA(),t.YNc(4,E,2,1,"ng-container",4),t.ALo(5,"async"),t.qZA()),2&o&&(t.xp6(3),t.Q6J("ngIf",e.isAdmin),t.xp6(1),t.Q6J("ngIf",t.lcZ(5,2,e.publications$)))},dependencies:[N.P,s.O5,A.lW,x,s.Ov]}),n})();var D=a(2671),j=a(6806);const V=[D.m,j.Bz.forChild([{path:"",component:U}])];let w=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[V]}),n})()}}]);