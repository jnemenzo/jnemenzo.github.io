"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[824],{4824:(H,d,o)=>{o.r(d),o.d(d,{AuthSignInModule:()=>q});var g=o(6806),p=o(4859),Z=o(6709),u=o(9549),h=o(7392),v=o(4144),I=o(1572),y=o(6236),S=o(7775),T=o(2671),c=o(5861),U=o(3036),w=o(3660),l=o(4006),C=o(3844);const J=["Nemenzo, Jessa","Brazil, Helen Joy","Dorilag, Jenky","Cartagena, Thalia","Sebugan, Jovelyn"];var t=o(4650),F=o(9653),N=o(3385),Q=o(6185),b=o(2494),x=o(6895);const E=["signInNgForm"];function M(n,r){1&n&&(t.TgZ(0,"span"),t._uU(1,"| "),t.qZA())}function _(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,M,2,0,"span",20),t.qZA()),2&n){const e=r.$implicit,i=r.index,a=t.oxw();t.xp6(1),t.hij("",e," "),t.xp6(1),t.Q6J("ngIf",i!==a.GROUP_MEMBERS.length-1)}}function Y(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Email address is required "),t.qZA())}function R(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Please enter a valid email address "),t.qZA())}function G(n,r){1&n&&t._UZ(0,"mat-icon",34),2&n&&t.Q6J("svgIcon","heroicons_solid:eye")}function O(n,r){1&n&&t._UZ(0,"mat-icon",34),2&n&&t.Q6J("svgIcon","heroicons_solid:eye-off")}function j(n,r){if(1&n&&(t.TgZ(0,"fuse-alert",35)(1,"div",36),t._UZ(2,"mat-icon",37),t.TgZ(3,"span",38),t._uU(4," Invalid admin account. "),t.qZA()(),t._uU(5," \xa0 "),t.qZA()),2&n){const e=t.oxw();t.Q6J("appearance","outline")("showIcon",!1)("type","error")("@shake","error"===e.alert.type)}}function P(n,r){1&n&&(t.TgZ(0,"span"),t._uU(1," Log-in"),t.qZA())}function B(n,r){1&n&&t._UZ(0,"mat-progress-spinner",39),2&n&&t.Q6J("diameter",24)("mode","indeterminate")}const z=[{path:"",component:(()=>{class n{constructor(e,i,a,m,s){this._router=e,this._store=i,this._formBuilder=a,this._angularFireAuth=m,this._angularFireStore=s,this.GROUP_MEMBERS=J,this.alert={type:"success",message:""},this.form=this._formBuilder.group({email:["admin@isat.edu.ph",[l.kI.required,l.kI.email]],password:["admin123",l.kI.required]}),this.showAlert=!1}ngOnInit(){}signIn(){var e=this;return(0,c.Z)(function*(){e.form.invalid||(e.form.disable(),e.checkIfFaculty(),e.showAlert=!1)})()}checkIfFaculty(){var e=this;return(0,c.Z)(function*(){const{email:i,password:a}=e.form.value;try{const m=yield e._angularFireStore.collection(w.F.FACULTIES).ref.where("email","==",i).where("password","==",a).get();if(m){let s=[];if(m.forEach(A=>{const L=A.data();s.push({...L,id:A.id})}),0===s.length)return void e.loginAsAdmin();const f=s[0];return e._store.dispatch(U.S.PROFILE.UPSERT_SUCCESS({faculty:f})),localStorage.setItem("accessToken","null"),localStorage.setItem("user",JSON.stringify({...f})),void setTimeout(()=>{e._router.navigate(["/profile/"+f.id])},1e3)}e.loginAsAdmin()}catch{e.loginAsAdmin()}})()}loginAsAdmin(){var e=this;return(0,c.Z)(function*(){const{email:i,password:a}=e.form.value;try{const s=(yield e._angularFireAuth.signInWithEmailAndPassword(i,a)).user.multiFactor.user;localStorage.setItem("accessToken",s.accessToken),localStorage.setItem("user",JSON.stringify({id:s.uid,...s.metadata,phone:s.phoneNumber,photoURL:s.photoURL})),e._router.navigate(["/dashboard"])}catch{e.form.enable(),e.signInNgForm.resetForm(),e.alert={type:"error",message:"Wrong email or password"},e.showAlert=!0}})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.F0),t.Y36(F.yh),t.Y36(l.QS),t.Y36(N.zQ),t.Y36(Q.ST))},n.\u0275cmp=t.Xpm({type:n,selectors:[["auth-sign-in"]],viewQuery:function(e,i){if(1&e&&t.Gf(E,5),2&e){let a;t.iGM(a=t.CRH())&&(i.signInNgForm=a.first)}},decls:53,vars:13,consts:[[1,"flex","flex-col","items-center","flex-auto","min-w-0","sm:flex-row","md:items-start","sm:justify-center","md:justify-start"],[1,"relative","items-center","justify-center","flex-auto","hidden","w-1/2","h-full","p-16","overflow-hidden","bg-black","md:flex","lg:px-28","dark:border-l"],["src","../../../../assets/bg4.jpeg","alt","",1,"absolute","object-fill","opacity-20","logo"],[1,"relative","z-10","w-full","max-w-2xl"],[1,"font-bold","text-white","text-7xl"],[1,"absolute","text-white","bottom-20"],[1,"font-medium","text-white"],[1,"text-isat-orange"],["target","_blank"],[4,"ngFor","ngForOf"],[1,"flex","w-full","px-4","py-8","bg-white","sm:w-auto","md:h-full","sm:p-16","md:p-16",3,"formGroup"],[1,"flex","flex-col","w-full","mx-auto","my-auto","sm:w-80","sm:mx-0"],[1,"p-8","mx-auto","bg-white","rounded-full",2,"height","20vh","width","20vh"],["src","/assets/logo.png","alt","",1,"object-cover","w-full","h-full","mt-auto"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tighter","text-center","md:text-left"],[1,"text-center","md:text-left"],[1,"mt-8",3,"formGroup"],["signInNgForm","ngForm"],[1,"w-full"],["id","email","matInput","",3,"formControlName"],[4,"ngIf"],["id","password","matInput","","type","password",3,"formControlName"],["passwordField",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],["class","w-full mr-2 -pt-3",3,"appearance","showIcon","type",4,"ngIf"],[1,"flex","items-center","justify-center","w-full","py-3","mt-6","font-black","text-white","rounded-full","fuse-mat-button-large","bg-isat-violet",3,"disabled","click"],[3,"diameter","mode",4,"ngIf"],[1,"flex","items-center","mt-8"],[1,"flex-auto","mt-px","border-t"],[1,"mx-2","text-secondary"],[1,"items-center","mt-8","text-center"],[1,"flex-text-info"],[1,"text-secondary"],[1,"icon-size-5",3,"svgIcon"],[1,"w-full","mr-2","-pt-3",3,"appearance","showIcon","type"],[1,"flex","w-full","aic"],["svgIcon","mat_outline:warning",1,"mr-3","icon-size-2"],[2,"transform","translateY(2px)"],[3,"diameter","mode"]],template:function(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.TgZ(3,"div",3)(4,"div",4),t._uU(5," Iloilo Science & Technology University Faculty Monitoring. "),t.qZA()(),t.TgZ(6,"div",5),t._UZ(7,"div",6),t._uU(8," Developed by: "),t.TgZ(9,"span",7)(10,"a",8),t._uU(11,"BSIT -4 | Group 6 | "),t.YNc(12,_,3,2,"span",9),t.qZA()()()()(),t.TgZ(13,"div",10)(14,"div",11)(15,"div",12),t._UZ(16,"img",13),t.qZA(),t.TgZ(17,"div",14),t._uU(18," Iloilo Science & Technology University "),t.qZA(),t.TgZ(19,"p",15),t._uU(20,"Faculty Monitoring System."),t.qZA(),t.TgZ(21,"form",16,17)(23,"mat-form-field",18)(24,"mat-label"),t._uU(25,"Email address"),t.qZA(),t._UZ(26,"input",19),t.YNc(27,Y,2,0,"mat-error",20),t.YNc(28,R,2,0,"mat-error",20),t.qZA(),t.TgZ(29,"mat-form-field",18)(30,"mat-label"),t._uU(31,"Password"),t.qZA(),t._UZ(32,"input",21,22),t.TgZ(34,"button",23),t.NdJ("click",function(){t.CHM(a);const s=t.MAs(33);return t.KtG(s.type="password"===s.type?"text":"password")}),t.YNc(35,G,1,1,"mat-icon",24),t.YNc(36,O,1,1,"mat-icon",24),t.qZA(),t.TgZ(37,"mat-error"),t._uU(38," Password is required "),t.qZA()(),t.YNc(39,j,6,4,"fuse-alert",25),t.TgZ(40,"button",26),t.NdJ("click",function(){return i.signIn()}),t.YNc(41,P,2,0,"span",20),t.YNc(42,B,1,2,"mat-progress-spinner",27),t.qZA(),t.TgZ(43,"div",28),t._UZ(44,"div",29),t.TgZ(45,"div",30),t._uU(46,"Having trouble?"),t.qZA(),t._UZ(47,"div",29),t.qZA(),t.TgZ(48,"div",31)(49,"div",32),t._uU(50,"Contact Us:"),t.qZA(),t.TgZ(51,"div",33),t._uU(52,"jnemenzo0013@gmail.com"),t.qZA()()()()()}if(2&e){const a=t.MAs(33);t.xp6(12),t.Q6J("ngForOf",i.GROUP_MEMBERS),t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(8),t.Q6J("formGroup",i.form),t.xp6(5),t.Q6J("formControlName","email"),t.xp6(1),t.Q6J("ngIf",i.form.get("email").hasError("required")),t.xp6(1),t.Q6J("ngIf",i.form.get("email").hasError("email")),t.xp6(4),t.Q6J("formControlName","password"),t.xp6(3),t.Q6J("ngIf","password"===a.type),t.xp6(1),t.Q6J("ngIf","text"===a.type),t.xp6(3),t.Q6J("ngIf",i.showAlert),t.xp6(1),t.Q6J("disabled",i.form.disabled),t.xp6(1),t.Q6J("ngIf",!i.form.disabled),t.xp6(1),t.Q6J("ngIf",i.form.disabled)}},dependencies:[p.lW,u.TO,u.KE,u.hX,u.R9,h.Hw,v.Nt,I.Ou,b.W,l._Y,l.Fj,l.JJ,l.JL,x.sg,x.O5,l.sg,l.u],encapsulation:2,data:{animation:C.L}}),n})()}];let q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Bz.forChild(z),p.ot,Z.p9,u.lN,h.Ps,v.c,I.Cq,y.J,S.fC,T.m]}),n})()}}]);